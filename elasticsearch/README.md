# Elastic

## Внутреннее устройство

* `index` – (аналог базы данных в реляционной БД) каждый `index` имеет схему (`mapping`), которая определяет
  каждый `type` в индексе, плюс широкий ряд настроек индекса. Схема может быть задана явно или будет создана
  автоматически при индексации.
* `document` – (аналог строки в реляционной БД) это объект json, сохраненный в `index`, имеет `type` и
  идентификатор (`id`);
* `shards` – шарды можно рассматривать как подмножество `index`: они полнофункциональные и независимые и служат для
  распределения хранения данных между нодами и повышения параллелизации выполнения операций. ElasticSearch поднимает
  весь индекс в память и если размер индекса превышает доступную память, то приложение падает по `OutOfMemoryError`.
  Следовательно, разбиение индекса на шарды позволяет загрузить их в память и не приведет к падению.
  ![Shard](images/shard.png)
* `replicas` – количество реплик индекса, ElasticSearch позволяет выполнять операции чтения с реплик.
* `routing` – определяет в каком шарде хранится документ.
* `analizers` – Анализаторы используются во время индексирования для разбора фраз и выражений на их составляющие части.
  Анализатор, определенный в индексе, состоит из одного токенизатора и любого количества фильтров токенов. По умолчанию
  Elasticsearch применяет стандартный анализатор, который содержит токенизатор на основе грамматики, удаляет
  распространенные английские слова и применяет дополнительные фильтры.

## Пример

```http request
POST /words/_search

{
  "query": {
    "match_all": {}
  },
  "sort": [
    {
      "counter": {
        "order": "desc"
      }
    }
  ],
  "size": 10
}
```

Информация об индексе

```http request
GET /_cat/words
```

## Ссылки

1. [Understanding Sharding in Elasticsearch](https://codingexplained.com/coding/elasticsearch/understanding-sharding-in-elasticsearch)
2. [10 Elasticsearch Concepts You Need to Learn](https://logz.io/blog/10-elasticsearch-concepts/)
